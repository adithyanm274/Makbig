{% load static %}
<style>
/* Ensure all images have a fixed size */
.product-image img {
    width: 100%;
    height: 300px; /* Ensures all images have the same height */
    object-fit: cover; /* Crops images properly */
}

/* Ensure all product grids have the same height */
.product-grid {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    align-items: center;
    text-align: center;
    height: 100%;
    min-height: 450px; /* Adjust this to match your tallest product */
    padding: 15px;
    border: 1px solid #ddd;
    border-radius: 10px;
    background: #fff;
}

/* Ensure carousel items are aligned properly */
.carousel-item .row {
    display: flex;
    flex-wrap: wrap;
}

/* Make product title visible */
h3.title {
    font-size: 16px;
    font-weight: bold;
    margin-top: 10px;
}

</style>
<div class="product-carousel">
    <div class="tab-products">
        <ul class="nav nav-tabs" id="myTab1" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" id="tab-1" data-toggle="tab" href="#tab1" role="tab" aria-controls="tab1" aria-selected="true">Men</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="tab-2" data-toggle="tab" href="#tab2" role="tab" aria-controls="tab2" aria-selected="false">Women</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="tab-3" data-toggle="tab" href="#tab3" role="tab" aria-controls="tab3" aria-selected="false">Hot</a>
            </li>
        </ul>

        <div class="tab-content" id="myTabContent-1">
            <div class="tab-pane fade show active" id="tab1" role="tabpanel" aria-labelledby="tab-1">
                <div class="tab-product-1">
                    <div class="titlebar">
                        <div class="next-back">
                            <span><a data-slide="prev" href="#Carousel-1" class="left carousel-control">Back</a></span>
                            <span><a data-slide="next" href="#Carousel-1" class="right carousel-control">Next</a></span>
                        </div>
                    </div>
                    
                    <div class="carousel-area">
                        <div id="Carousel-1" class="carousel slide" data-ride="carousel">
                            <div class="carousel-inner">
                                {% for product in products %}
                                    {% if forloop.first or forloop.counter0|divisibleby:4 %}
                                    <div class="carousel-item {% if forloop.first %}active{% endif %}">
                                        <div class="row">
                                    {% endif %}
                                            <div class="col-md-3">
                                                <div class="product-grid">
                                                    <div class="product-image">
                                                        <a href="{% url 'product_detail' product.id product.slug %}">
                                                            <img class="pic-1" src="{{ product.feature_image }}"alt="{{ product.title }}">
                                                        </a>
                                                        <ul class="social">
                                                            <li><a href="{% url 'product_detail' product.id product.slug %}" data-tip="Quick View"><i class="fa fa-eye"></i></a></li>
                                                            <li><a href="#" data-tip="Wishlist"><i class="fa fa-shopping-bag"></i></a></li>
                                                            <li><a href="#" data-tip="Compare"><i class="fas fa-exchange-alt"></i></a></li>
                                                        </ul>
                                                    </div>
                                                    <h3 class="title">{{ product.title|truncatechars:60 }}</h3>
                                                    <div class="product-content">
                                                        <div class="price">Discount:{{ product.discount }}%
                                                          Price:₹{{ product.price }}
                                                        </div>
                                                        <a class="add-to-cart" href="cart.html">Add To Cart</a>
                                                    </div>
                                                </div>
                                            </div>
                                    {% if forloop.counter|divisibleby:4 or forloop.last %}
                                        </div>
                                    </div>
                                    {% endif %}
                                {% endfor %}
                            </div>
                        </div>
                    </div> 
                    
                </div>
            </div>
        </div>
    </div>
</div>
{% comment %} ############################################################################################## {% endcomment %}


{% comment %} ######################## {% endcomment %}
<div class="product-carousel">
    <div class="tab-products">
        <ul class="nav nav-tabs" id="myTab1" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" id="tab-1" data-toggle="tab" href="#tab1" role="tab" aria-controls="tab1" aria-selected="true">New Arrival</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="tab-2" data-toggle="tab" href="#tab2" role="tab" aria-controls="tab2" aria-selected="false">Featured</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="tab-3" data-toggle="tab" href="#tab3" role="tab" aria-controls="tab3" aria-selected="false">Best Seller</a>
            </li>
        </ul>

        <div class="tab-content" id="myTabContent-1">
            <div class="tab-pane fade show active" id="tab1" role="tabpanel" aria-labelledby="tab-1">
                <div class="tab-product-1">
                    <div class="titlebar">
                        <div class="next-back">
                            <span><a data-slide="prev" href="#Carousel-1" class="left carousel-control">Back</a></span>
                            <span><a data-slide="next" href="#Carousel-1" class="right carousel-control">Next</a></span>
                        </div>
                    </div>
                    
                    <div class="carousel-area">
                        <div id="Carousel-1" class="carousel slide" data-ride="carousel">
                            <div class="carousel-inner">
                                {% for product in products %}
                                    {% if forloop.first or forloop.counter0|divisibleby:4 %}
                                    <div class="carousel-item {% if forloop.first %}active{% endif %}">
                                        <div class="row">
                                    {% endif %}
                                            <div class="col-md-3">
                                                <div class="product-grid">
                                                    <div class="product-image">
                                                        <a href="configurable.html">
                                                            <img class="pic-1" src="{{ product.feature_image }}"alt="{{ product.title }}">
                                                        </a>
                                                        <ul class="social">
                                                            <li><a href="#" data-tip="Quick View"><i class="fa fa-eye"></i></a></li>
                                                            <li><a href="#" data-tip="Wishlist"><i class="fa fa-shopping-bag"></i></a></li>
                                                            <li><a href="#" data-tip="Compare"><i class="fas fa-exchange-alt"></i></a></li>
                                                        </ul>
                                                    </div>
                                                    <h3 class="title">{{ product.title|truncatechars:60 }}</h3>
                                                    <div class="product-content">
                                                        <div class="price">₹{{ product.price }}
                                                            {% comment %} <span>${{ product.original_price }}</span> {% endcomment %}
                                                        </div>
                                                        <a class="add-to-cart" href="cart.html">Add To Cart</a>
                                                    </div>
                                                </div>
                                            </div>
                                    {% if forloop.counter|divisibleby:4 or forloop.last %}
                                        </div>
                                    </div>
                                    {% endif %}
                                {% endfor %}
                            </div>
                        </div>
                    </div> 
                    
                </div>
            </div>
        </div>
    </div>
</div>